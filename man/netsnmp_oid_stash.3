.TH "Store and retrieve data referenced by an OID." 3 "28 Oct 2003" "net-snmp" \" -*- nroff -*-
.ad l
.nh
.SH NAME
Store and retrieve data referenced by an OID. \- This is essentially a way of storing data associated with a given OID. 
More...
.SS "Functions"

.in +1c
.ti -1c
.RI "netsnmp_oid_stash_node * \fBnetsnmp_oid_stash_create_sized_node\fP (size_t mysize)"
.br
.RI "\fICreate an netsnmp_oid_stash node.\fP"
.ti -1c
.RI "NETSNMP_INLINE netsnmp_oid_stash_node * \fBnetsnmp_oid_stash_create_node\fP (void)"
.br
.RI "\fICreates a netsnmp_oid_stash_node.\fP"
.ti -1c
.RI "int \fBnetsnmp_oid_stash_add_data\fP (netsnmp_oid_stash_node **root, oid *lookup, size_t lookup_len, void *mydata)"
.br
.RI "\fIadds data to the stash at a given oid.\fP"
.ti -1c
.RI "netsnmp_oid_stash_node * \fBnetsnmp_oid_stash_get_node\fP (netsnmp_oid_stash_node *root, oid *lookup, size_t lookup_len)"
.br
.RI "\fIreturns a node associated with a given OID.\fP"
.ti -1c
.RI "netsnmp_oid_stash_node * \fBnetsnmp_oid_stash_getnext_node\fP (netsnmp_oid_stash_node *root, oid *lookup, size_t lookup_len)"
.br
.RI "\fIreturns the next node associated with a given OID.\fP"
.ti -1c
.RI "void * \fBnetsnmp_oid_stash_get_data\fP (netsnmp_oid_stash_node *root, oid *lookup, size_t lookup_len)"
.br
.RI "\fIreturns a data pointer associated with a given OID.\fP"
.ti -1c
.RI "int \fBnetsnmp_oid_stash_store_all\fP (int majorID, int minorID, void *serverarg, void *clientarg)"
.br
.RI "\fIa wrapper around netsnmp_oid_stash_store for use with a snmp_alarm.\fP"
.ti -1c
.RI "void \fBnetsnmp_oid_stash_store\fP (netsnmp_oid_stash_node *root, const char *tokenname, NetSNMPStashDump *dumpfn, oid *curoid, size_t curoid_len)"
.br
.RI "\fIstores data in a starsh tree to peristent storage.\fP"
.ti -1c
.RI "void \fBoid_stash_dump\fP (netsnmp_oid_stash_node *root, char *prefix)"
.br
.RI "\fIFor debugging: dump the netsnmp_oid_stash tree to stdout.\fP"
.ti -1c
.RI "void \fBnetsnmp_oid_stash_free\fP (netsnmp_oid_stash_node **root, NetSNMPStashFreeNode *freefn)"
.br
.RI "\fIFrees the contents of a netsnmp_oid_stash tree.\fP"
.ti -1c
.RI "void \fBnetsnmp_oid_stash_no_free\fP (void *bogus)"
.br
.in -1c
.SH "DETAILED DESCRIPTION"
.PP 
This is essentially a way of storing data associated with a given OID.
.PP
It stores a bunch of data pointers within a memory tree that allows fairly efficient lookups with a heavily populated tree. 
.SH "FUNCTION DOCUMENTATION"
.PP 
.SS "int netsnmp_oid_stash_add_data (netsnmp_oid_stash_node ** root, oid * lookup, size_t lookup_len, void * mydata)"
.PP
adds data to the stash at a given oid.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIroot\fP\fP
the top of the stash tree 
.TP
\fB\fIlookup\fP\fP
the oid index to store the data at. 
.TP
\fB\fIlookup_len\fP\fP
the length of the lookup oid. 
.TP
\fB\fImydata\fP\fP
the data to store
.PP
\fBReturns: \fP
.in +1c
SNMPERR_SUCCESS on success, SNMPERR_GENERR if data is already there, SNMPERR_MALLOC on malloc failures or if arguments passed in with NULL values. 
.PP
Definition at line 87 of file oid_stash.c.
.SS "NETSNMP_INLINE netsnmp_oid_stash_node* netsnmp_oid_stash_create_node (void)"
.PP
Creates a netsnmp_oid_stash_node.
.PP
Assumes you want the default OID_STASH_CHILDREN_SIZE hash size for the node. 
.PP
\fBReturns: \fP
.in +1c
NULL on error, otherwise the newly allocated node 
.PP
Definition at line 70 of file oid_stash.c.
.SS "netsnmp_oid_stash_node* netsnmp_oid_stash_create_sized_node (size_t mysize)"
.PP
Create an netsnmp_oid_stash node.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fImysize\fP\fP
the size of the child pointer array
.PP
\fBReturns: \fP
.in +1c
NULL on error, otherwise the newly allocated node 
.PP
Definition at line 50 of file oid_stash.c.
.SS "void netsnmp_oid_stash_free (netsnmp_oid_stash_node ** root, NetSNMPStashFreeNode * freefn)"
.PP
Frees the contents of a netsnmp_oid_stash tree.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIroot\fP\fP
the top of the tree (or branch to be freed) 
.TP
\fB\fIfreefn\fP\fP
The function to be called on each data (void *) pointer. If left NULL the system free() function will be called 
.PP
Definition at line 399 of file oid_stash.c.
.SS "void* netsnmp_oid_stash_get_data (netsnmp_oid_stash_node * root, oid * lookup, size_t lookup_len)"
.PP
returns a data pointer associated with a given OID.
.PP
This is equivelent to netsnmp_oid_stash_get_node, but returns only the data not the entire node.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIroot\fP\fP
the top of the stash 
.TP
\fB\fIoid\fP\fP
the oid to search for 
.TP
\fB\fIthe\fP\fP
length of the search oid. 
.PP
Definition at line 283 of file oid_stash.c.
.SS "netsnmp_oid_stash_node* netsnmp_oid_stash_get_node (netsnmp_oid_stash_node * root, oid * lookup, size_t lookup_len)"
.PP
returns a node associated with a given OID.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIroot\fP\fP
the top of the stash tree 
.TP
\fB\fIlookup\fP\fP
the oid to look up a node for. 
.TP
\fB\fIlookup_len\fP\fP
the length of the lookup oid 
.PP
Definition at line 155 of file oid_stash.c.
.SS "netsnmp_oid_stash_node* netsnmp_oid_stash_getnext_node (netsnmp_oid_stash_node * root, oid * lookup, size_t lookup_len)"
.PP
returns the next node associated with a given OID.
.PP
INCOMPLETE. This is equivelent to a GETNEXT operation. 
.PP
Definition at line 192 of file oid_stash.c.
.SS "void netsnmp_oid_stash_store (netsnmp_oid_stash_node * root, const char * tokenname, NetSNMPStashDump * dumpfn, oid * curoid, size_t curoid_len)"
.PP
stores data in a starsh tree to peristent storage.
.PP
This function can be called to save all data in a stash tree to Net-SNMP's percent storage. Make sure you register a parsing function with the read_config system to re-incorperate your saved data into future trees.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIroot\fP\fP
the top of the stash to store. 
.TP
\fB\fItokenname\fP\fP
the file token name to save in (passing 'snmpd' will save things into snmpd.conf). 
.TP
\fB\fIdumpfn\fP\fP
A function which can dump the data stored at a particular node into a char buffer. 
.TP
\fB\fIcuroid\fP\fP
must be a pointer to a OID array of length MAX_OID_LEN. 
.TP
\fB\fIcuroid_len\fP\fP
must be 0 for the top level call. 
.PP
Definition at line 332 of file oid_stash.c.
.SS "int netsnmp_oid_stash_store_all (int majorID, int minorID, void * serverarg, void * clientarg)"
.PP
a wrapper around netsnmp_oid_stash_store for use with a snmp_alarm.
.PP
when calling snmp_alarm, you can list this as a callback. The clientarg should be a pointer to a netsnmp_oid_stash_save_info pointer. It can also be called directly, of course. The last argument (clientarg) is the only one that is used. The rest are ignored by the function. 
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIclientarg\fP\fP
A pointer to a netsnmp_oid_stash_save_info structure. 
.PP
Definition at line 302 of file oid_stash.c.
.SS "void oid_stash_dump (netsnmp_oid_stash_node * root, char * prefix)"
.PP
For debugging: dump the netsnmp_oid_stash tree to stdout.
.PP
Parameters: \fP
.in +1c
.TP
\fB\fIroot\fP\fP
The top of the tree 
.TP
\fB\fIprefix\fP\fP
a character string prefix printed to the beginning of each line. 
.PP
Definition at line 372 of file oid_stash.c.
