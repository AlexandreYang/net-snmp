top_builddir=../..

CPPFLAGS=-I ../../include -I$(top_srcdir)/include \
	-I. -I.. -I../.. -I$(srcdir) -I$(srcdir)/..  \
	-I$(srcdir)/../mibgroup -I$(srcdir)/../.. -I$(srcdir)/../../snmplib \
	@CPPFLAGS@ $(LIB_CFLAGS)

OBJS =  all_helpers.o \
	multiplexer.o \
	read_only.o \
	bulk_to_next.o \
	instance.o \
	null.o \
	debug_handler.o \
	old_api.o \
	serialize.o \
	table_array.o \
	table_iterator.o \
	table_data.o \
	table_dataset.o \
	table.o

LOBJS = all_helpers.lo \
	multiplexer.lo \
	read_only.lo \
	bulk_to_next.lo \
	instance.lo \
	null.lo \
	debug_handler.lo \
	old_api.lo \
	serialize.lo \
	table_array.lo \
	table_iterator.lo \
	table_data.lo \
	table_dataset.lo \
	table.lo

SRCS =  all_helpers.c \
	multiplexer.c \
	read_only.c \
	bulk_to_next.c \
	instance.c \
	null.c \
	debug_handler.c \
	old_api.c \
	serialize.c \
	table_array.c \
	table_iterator.c \
	table_data.c \
	table_dataset.c \
	table.c

INSTALLHEADERS=$(top_srcdir)/include/net-snmp/agent/all_helpers.h \
	$(top_srcdir)/include/net-snmp/agent/instance.h \
        $(top_srcdir)/include/net-snmp/agent/multiplexer.h \
	$(top_srcdir)/include/net-snmp/agent/bulk_to_next.h \
        $(top_srcdir)/include/net-snmp/agent/null.h \
        $(top_srcdir)/include/net-snmp/agent/debug_handler.h \
        $(top_srcdir)/include/net-snmp/agent/old_api.h \
        $(top_srcdir)/include/net-snmp/agent/read_only.h \
        $(top_srcdir)/include/net-snmp/agent/serialize.h \
        $(top_srcdir)/include/net-snmp/agent/set_helper.h \
        $(top_srcdir)/include/net-snmp/agent/table_data.h \
        $(top_srcdir)/include/net-snmp/agent/table_dataset.h \
	$(top_srcdir)/include/net-snmp/agent/table_array.h \
        $(top_srcdir)/include/net-snmp/agent/table.h \
        $(top_srcdir)/include/net-snmp/agent/table_iterator.h

LIBTARG=libnetsnmphelpers.$(LIB_EXTENSION)$(LIB_VERSION)

all: $(LIBTARG)

libnetsnmphelpers.$(LIB_EXTENSION)$(LIB_VERSION):    ${LOBJS}
	$(LIB_LD_CMD) libnetsnmphelpers.$(LIB_EXTENSION)$(LIB_VERSION) ${LOBJS}  $(LIB_LD_LIBS)
	$(RANLIB) libnetsnmphelpers.$(LIB_EXTENSION)$(LIB_VERSION)

install: installdirs
	@$(INSTALL) $(INSTALLHEADERS) $(includedir)/agent
	@for i in $(INSTALLHEADERS) ; do echo "install:  installed $$i in $(includedir)" ; done
	@$(INSTALL) $(LIBTARG) $(libdir)
	@for i in $(LIBTARG) ; do $(RANLIB) $(libdir)/$$i ; echo "install:  installed $$i in $(libdir)" ; done
	$(LIB_LDCONFIG_CMD)

installdirs:
	@$(SHELL) $(top_srcdir)/mkinstalldirs $(snmplibdir) $(includedir) $(includedir)/agent

clean:
	rm -f ${LOBJS} ${OBJS} ${LIBTARG}
	rm -rf .libs

depend: 
	makedepend $(CPPFLAGS) -o.lo $(SRCS)

nosysdepend:
	makedepend $(CPPFLAGS) -o.lo $(SRCS)
	perl -n -i.bak $(top_srcdir)/makenosysdepend.pl Makefile

makefileindepend: nosysdepend
	perl $(top_srcdir)/makefileindepend.pl


# DO NOT DELETE THIS LINE -- make depend depends on it.

