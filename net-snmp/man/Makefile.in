SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
@SET_MAKE@

mandir = @mandir@
man1dir = $(mandir)/man1
man3dir = $(mandir)/man3
man5dir = $(mandir)/man5
man8dir = $(mandir)/man8
libdir = @libdir@
snmplibdir = $(libdir)/snmp

INSTALL = @INSTALL@

SED = @SED@

MAN1 = snmpget.1 snmpset.1 snmpwalk.1 snmpbulkwalk.1 snmpgetnext.1 snmptest.1 snmpnetstat.1 snmptranslate.1 snmpstatus.1 snmptrap.1
MAN1G = snmpd.1
MAN3 = snmp_api.3 mib_api.3
MAN5 = variables.5
MAN5G = snmpd.conf.5
MAN8 = snmptrapd.8

TARGETS = snmpd.conf.5 snmpd.1

all: $(TARGETS)

snmpd.conf.5: snmpd.conf.5.def ../sedscript
	$(SED) -f ../sedscript < $(srcdir)/snmpd.conf.5.def > snmpd.conf.5

snmpd.1: snmpd.1.def ../sedscript
	$(SED) -f ../sedscript < $(srcdir)/snmpd.1.def > snmpd.1

install:  installdirs $(MAN1) $(MAN3) $(MAN5) $(MAN8)
	@for i in $(MAN1) ; do $(INSTALL) $(srcdir)/$$i $(man1dir) ; echo "install:  installed $$i in $(man1dir)" ; done
	@for i in $(MAN1G) ; do $(INSTALL) $$i $(man1dir) ; echo "install:  installed $$i in $(man1dir)" ; done
	@for i in $(MAN3) ; do $(INSTALL) $(srcdir)/$$i $(man3dir) ; echo "install:  installed $$i in $(man3dir)" ; done
	@for i in $(MAN5) ; do $(INSTALL) $(srcdir)/$$i $(man5dir) ; echo "install:  installed $$i in $(man5dir)" ; done
	@for i in $(MAN5G) ; do $(INSTALL) $$i $(man5dir) ; echo "install:  installed $$i in $(man5dir)" ; done
	@for i in $(MAN8) ; do $(INSTALL) $(srcdir)/$$i $(man8dir) ; echo "install:  installed $$i in $(man8dir)" ; done

installdirs:
	@$(SHELL) $(srcdir)/../mkinstalldirs $(man1dir) $(man3dir) $(man5dir) $(man8dir)

clean:
	rm -f $(TARGETS)
