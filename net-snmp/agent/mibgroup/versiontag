#!/bin/sh

QUOTEFILES="version.h bug-report"
SEDFILES="sedscript.in"

case "$1" in
  Ext*) ;;
  *) exit 0 ;;
esac

VERSION=`echo $1 | sed 's/Ext-*//g;s/-/./g;'`

if [ $2 = "add" ]; then
  perl -p -i.bak -e 's/VersionInfo="(.*)"/VersionInfo="'$VERSION'"/;' $QUOTEFILES
  perl -p -i.bak -e 's#^s/VERSIONINFO/.*#s/VERSIONINFO/'$VERSION'/g#;' $SEDFILES
  cvs commit -m "- ($QUOTEFILES $SEDFILES): version tag ( $VERSION )" $QUOTEFILES $SEDFILES
fi

exit 0
