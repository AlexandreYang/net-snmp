#
# Makefile for snmpd
#
TARG=	snmpd
LIBS=	../lib/libsnmp.a
LDFLAGS=
OSFLAGS=
CFLAGS=-g -I../snmplib ${INCLUDES} -DDEBUG ${OSFLAGS}
CC =cc
DIRS=extensible
EXTENSIBLEOBJS=extensible/misc.o extensible/read_config.o extensible/extensible.o extensible/hpmibs.o extensible/versioninfo.o\
        extensible/proc.o extensible/exec.o
all: 
	cd extensible; gmake all ; cd ..
	$(MAKE) $(TARG)

snmpd:	snmpd.o kernel.o ${LIBS} snmp_agent.o snmp_vars.o snmp_var_route.o party_vars.o context_vars.o acl_vars.o view_vars.o view_parse.o alarm.o event.o route_write.o ${EXTENSIBLEOBJS}
	${CC} -o $@ snmpd.o kernel.o snmp_agent.o snmp_vars.o snmp_var_route.o party_vars.o context_vars.o acl_vars.o view_vars.o view_parse.o alarm.o event.o route_write.o   ${EXTENSIBLEOBJS} ${LIBS}  ${LDFLAGS}

sabersnmpd:	snmpd.c kernel.o snmp_agent.c snmp_vars.o snmp_var_route.o party_vars.c context_vars.c acl_vars.c view_vars.c view_parse.c ../snmplib/acl.c ../snmplib/acl_parse.o ../snmplib/asn1.c ../snmplib/md5.o ../snmplib/mib.o ../snmplib/parse.o ../snmplib/party.c ../snmplib/context.c ../snmplib/party_parse.o ../snmplib/context_parse.o ../snmplib/snmp.c ../snmplib/snmp_api.c ../snmplib/snmp_auth.c ../snmplib/snmp_client.o ../snmplib/view.c alarm.c event.c route_write.c ../snmplib/system.o ../lib/libdes.a /lib/libc.a
	#load $(CFLAGS) snmpd.c kernel.o snmp_agent.c snmp_vars.o snmp_var_route.o party_vars.c context_vars.c acl_vars.c view_vars.c view_parse.c ../snmplib/acl.c ../snmplib/acl_parse.o ../snmplib/asn1.c ../snmplib/md5.o ../snmplib/mib.o ../snmplib/parse.o ../snmplib/party.c ../snmplib/context.c ../snmplib/party_parse.o ../snmplib/context_parse.o ../snmplib/snmp.c ../snmplib/snmp_api.c ../snmplib/snmp_auth.c ../snmplib/snmp_client.o ../snmplib/view.c alarm.c event.c route_write.c ../snmplib/system.o ../lib/libdes.a /lib/libc.a

clean:
	rm -f *.o ${TARG}

install:
	cp ${TARG} ../bin

extensible:	
	pushd extensible; make; popd

party_vars.o: ../snmplib/party.h
context_vars.o: ../snmplib/context.h
snmp_vars.o: ../snmplib/party.h extensible/extensible.c ../config.h\
 extensible/snmp_vars.h extensible/mibdefs.h
alarm.c:  ../snmplib/party.h
event.c:  ../snmplib/party.h
snmpd.c:  ../snmplib/party.h ../config.h

