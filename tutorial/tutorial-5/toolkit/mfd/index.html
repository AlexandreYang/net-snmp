<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>MIBs For Dummies</title>
  </head>

  <body bgcolor="#ffffff">
    <!-- ========================================================= -->
    <h1>MIBs For Dummies</h1>
    <p><em>NOTE: this tutorial is based on the code for the upcoming release
        5.2 (currently in the main CVS line). If you generate code from a
        release prior to 5.2, your results may vary.</em>
    </p><p>
      One of the questions that comes up on our mailing lists a lot is:
      <i>I just ran mib2c on my MIB. What do I do now?</i>. The work that needs
      to be done varies by the mib2c configuration file used to generate the
      template code. Some, like the <b>iterator</b> configuration file, simply
      generate a framework for locating data, but leave all the data processing
      details to the user. Others, like the <b>array iterator</b>, also
      generate code to handle some of the details. All of the, however, require
      a good bit of knowledge about SNMP.
    </p><p>
      One of the primary motivations for writing the MIBs for Dummies
      configuration file was to reduce the amount of SNMP knowledge needed to
      implement a MIB. When using the MFD configuration file, mib2c will
      generate <i>glue</i> code that hides some of the SNMP (or Net-SNMP)
      specific details for implementing a module, and allows the rest of the
      template code to use simple C data structures that you are probably more
      familiar with. Most of the template functions are short and simple, with
      a clearly defined purpose.
    </p><p>
      Another motivation was to separate the method used to locate the data
      for a request from the methods that manipulate the data. The data lookup
      for MFD modules uses the <var>netsnmp_container</var> interface. Data
      ordering can be tricky in SNMP, since the lexicographical ordering
      required by SNMP specification isn't always intuitive, and the index
      specified in the MIB you have to implement might
      not match the order in which your data is currently stored. But the
      MFD configuration file can help you out with this problem too.
    </p>
    <h2>A Quick Overview</h2>
    <p>
      The templates generated by the MFD configuration file fall into one of
      two categories: data lookup and data manipulation. Data lookup is finding
      the right data for a given SNMP request. Data manipulation is either
      returning existing values or setting new values.
    </p>
    <h3>Data Lookup</h3>
    <p>
      There are lots of different ways to access data. Your data store may be
      a linked list, a text file, a database or an API to some device.
      Instead of trying to deal with all of the possiblities in the template
      code, the <var>netsnmp_container</var> interface is used. By default,
      an iterator container wrapper will be generated, which should handle
      just about any data store. This wrapper works almost exactly like the
      previous mib2c.iterator.conf configuration file. The basic idea is that
      a  single function (get_next) will be called to loop over every item in
      your data store. For each item, you will provide the values for the
      indexes defined by your MIB. The agent will then select the appropriate
      data item for a request. It might not be very efficient, but it should
      work for almost any type of data store. (Later in the tutorial, we'll
      talk about more efficient methods.)
    </p>
    <p>
      The data returned during lookup is referred to as the 
      <var>data context</var>.
      The data context structure should contain all the data needed to get
      or set a value. The MFD configuration file will generate a data
      context structure with sufficient storage for all the objects
      defined in the MIB being implemented. (Later in the tutorial, we'll talk
      about using existing structures.)
    <h3>Data manipulation</h3>
    <p>
      Once the appropriate data structure is retrieved from the data store,
      the data manipulation routines will be called. For each object defined
      in your mib module, a function will be generated to extract the data
      value from the data structure located during the data lookup phase.
    </p>
    <p>
      For read-write objects, things get more complicated. SET requests
      are processed in multiple steps, so there are multiple functions
      generated for each object. These include functions for syntax checks,
      value checks, undo setup, value set and undo value set.
      Additionlly, several functions are generated per table, for tasks which
      only need to be performed once, even if multiple objects are set for a
      given index. Two examples are consistency checks and commit changes.
      All of these functions will be discussed in more detail later in the
      tutorial.
    </p>
    <h2>Getting Started</h2>
    <p></p>
    <h2>Examples</h2>
    <p>
      There are several example implementations. The process of
      implementing a module using the MFD configuration file can be
      broken down into several steps.
    </p>
    <ul>
      <li>Generating the template code
      <li>Implementing a <var>netsnmp_container</var> for data access
      <li>Implementing <b>GET</b> requests functions
      <li>Implementing <b>SET</b> requests functions
    </ul>
    </p>
    <h3>Basic Tables</h3>
    <p>
      These examples are fairly basic, and should suffice for most simple
      MIB tables and data stores.
    </p>
    <ul>
      <li><a href="if-mib/index.html">IF-MIB Tables</a>
        <ul>
          <li><a href="if-mib/ifTable/index.html">ifTable</a>: A simple
            table with a single integer index which gets it's data from
            a text file. (Partial, read-only implementation)
          <li>ifXTable</a>: A simple
            table with a single integer index which gets it's data from
            a text file, and caches it. (Partial, read-only implementation)
        </ul>
    </ul>
    <h3>Intermediate Tables</h3>
    <p>
      These examples are sill fairly basic, but we are starting to add
      a few twists.
    </p>
    <ul>
      <li>TBD (set support; row creation?)
    </ul>
    <h3>Advanced Tables</h3>
    <p>
      These examples show how to deal with complicated issues that
      sometimes come up while implementing MIB modules..
    </p>
    <ul>
      <li>TBD ...
    </ul>
    <!-- ========================================================= -->
    <hr>
    rstory at freesnmp dot com<br>
Version $Revision$
<!-- Created: Fri Oct 24 10:41:49 EDT 2003 -->
<!-- hhmts start -->
Last modified: Thu Apr 22 22:57:41 EDT 2004
<!-- hhmts end -->
<!--#include virtual="/sfbutton.html" -->
  </body>
</html>
